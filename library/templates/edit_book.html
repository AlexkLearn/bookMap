<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Edit Book</title>

  {% load static %}

  <link rel="stylesheet" href="{% static 'styles/add_book.css' %}">
  <link rel="stylesheet" href="{% static 'styles/bootstrap/css/bootstrap.css' %}">
</head>
<body>

  <div class="container py-5">
    <div class="form-wrapper mx-auto p-4 shadow-lg rounded">
      <h1 class="text-center mb-4">Update book details</h1>

      <form method="POST" enctype="multipart/form-data">

        {% csrf_token %}

        <p id="err-msg" style="
          color: #eee;
          display: none;
          background-color: tomato;
          border-radius: .25rem;
          padding: .25rem;
          margin: .12rem;
          text-align: center
        ">An error occured</P>

        <div class="row g-4">
          <div class="col-md-6">
            <label class="form-label">Book Title *</label>
            <input type="text" class="form-control"
              name="title" value="{{ book.title }}"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Author *</label>
            <input type="text" class="form-control"
              name="author" value="{{ book.author }}"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Category *</label>
            <select class="form-select" name="category">
              <option value="">Select category</option>
              {% for value, label in book.CATEGORY_CHOICES %}
								<option value="{{ value }}" 
									{% if book.category == value %}selected{% endif %}
								>
									{{ label }}
								</option>
							{% endfor %}
            </select>
          </div>

          <div class="col-md-6">
            <label class="form-label">Genre</label>
            <input type="text" class="form-control" name="genre"
              placeholder="Type genre" value="{{ book.genre }}"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Copies *</label>
            <input type="number"
              min="1" class="form-control"
              name="copies" value="{{ book.copies }}"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label" for="section">Section *</label>
            <select class="form-select" name="section" id="section">
              <option value="">Select section</option>
              <option value="a">A</option>
              <option value="b">B</option>
              <option value="c">C</option>
              <option value="d">D</option>
              <option value="e">E</option>
              <option value="f">F</option>
            </select>
          </div>

          <div class="col-md-6">
            <label class="form-label">Shelf *</label>
            <input type="text" name="shelf" class="form-control"
              value="{{ book.shelf }}"
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Row *</label>
            <input type="number" min="1" class="form-control"
              name="row" required value="{{ book.row }}"
            />
          </div>

          <div class="col-12">
            <label class="form-label">Cover Image</label>
            {% if book.book_cover %}
              <br> Existing Image: <br>
              <img src={{ book.book_cover.url }}
									 alt="{{b.title}} Book Cover"
									 class="img-thumbnail mb-2"
									 style="max-width: 150px;"
							>
              <br>
            {% else %}
              <br>
              <span style="color: tomato;">No image uploaded.</span>
            {% endif %}
            <input type="file" name="cover" class="form-control">
          </div>
        </div>

        <div class="d-flex justify-content-between mt-4" id="btns">
          <button type="button" class="btn btn-outline-light cancel-btn px-4"
            onclick="location.href={% url 'dashboard' %}"
          >
            Cancel
          </button>
          <button type="submit" class="btn btn-light add-btn px-4">
            Edit
          </button>
        </div>

      </form>
    </div>
  </div>

</body>
</html>